(function(){"use strict";var t={5221:function(t,e,s){var o=s(144),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-app",[o("div",{staticClass:"px-xl-16 pt-10",attrs:{id:"bg"}},[o("v-app-bar",{attrs:{elevation:"1",fixed:"",src:s(8373),height:t.Appheight}},[o("v-app-bar-nav-icon",{staticClass:"d-sm-none",attrs:{dark:""},on:{click:function(e){t.drawer=!0}}}),o("router-link",{staticClass:"logo mt-sm-6",attrs:{to:"/"}},[o("v-img",{attrs:{src:s(9574),alt:"logo",contain:""}})],1),o("v-dialog",{attrs:{"close-on-content-click":!1,"max-width":"30vh"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[o("v-tabs",{staticClass:"mt-6 d-none d-sm-block",attrs:{right:"","hide-slider":"",dark:"",height:"80","active-class":"fontColor"}},[o("v-tabs-slider"),o("v-tab",{staticClass:"px-md-6",attrs:{to:"/"}},[o("h2",[t._v("商品")])]),o("v-tab",{staticClass:"px-md-6",attrs:{to:"/grouppage",disabled:""}},[o("h2",[t._v("團體募集")])]),o("v-tab",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:!t.user.isLogin,expression:"!user.isLogin"}],staticClass:"px-md-6 none"},"v-tab",a,!1),s),[o("h2",[t._v("會員登入")])]),t.user.isLogin?o("v-menu",{attrs:{bottom:"","offset-y":"","open-on-hover":"","close-on-click":!0,"close-on-content-click":!0,transition:"fade-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[o("v-tab",t._g(t._b({staticClass:"px-md-6",attrs:{to:"/memberpage"}},"v-tab",a,!1),s),[o("h2",[t._v("會員專區")])])]}}],null,!0)},[o("v-list",{staticClass:"text-center py-0"},[o("v-list-item-group",t._l(t.lists,(function(e,s){return o("span",{key:s},[o("v-list-item",3==s?{staticClass:"red--text",on:{click:t.logout}}:{staticClass:"orange--text text--darken-2",attrs:{to:t.lists[s].url}},[o("v-list-item-title",[t._v(t._s(t.lists[s].name))])],1),2==s?o("v-divider"):t._e()],1)})),0)],1)],1):t._e(),o("v-tab",{staticClass:"px-md-6",attrs:{to:"/about"}},[o("h2",[t._v("關於我們")])])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",{staticClass:"pa-2 pa-sm-8 text-center"},[o("h2",{directives:[{name:"show",rawName:"v-show",value:t.logining,expression:"logining"}],staticClass:"animate__animated animate__fadeIn animate__fast"},[t._v(" 會員登入 ")]),o("h2",{directives:[{name:"show",rawName:"v-show",value:!t.logining,expression:"!logining"}],staticClass:"animate__animated animate__fadeIn animate__fast"},[t._v(" 會員註冊 ")]),o("v-form",{directives:[{name:"show",rawName:"v-show",value:t.logining,expression:"logining"}],ref:"form",staticClass:"animate__animated animate__fadeIn animate__fast",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[o("v-text-field",{attrs:{counter:20,rules:t.accountRules,label:"帳號",required:""},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}}),o("v-text-field",{attrs:{rules:t.passwordRules,label:"密碼",required:"","append-icon":t.show?"mdi-eye":"mdi-eye-off",type:t.show?"text":"password",counter:""},on:{"click:append":function(e){t.show=!t.show}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),o("v-btn",{staticClass:"ma-4",attrs:{disabled:!t.valid,outlined:"",rounded:"",color:"orange",type:"submit"},on:{click:function(e){t.accountvalidate,t.dialog=!1}}},[t._v(" 登入 ")]),o("br"),o("v-btn",{attrs:{text:"",color:"error"},on:{click:function(e){t.logining=!1}}},[t._v(" 還沒有帳號? 立即註冊 ")])],1),o("v-form",{directives:[{name:"show",rawName:"v-show",value:!t.logining,expression:"!logining"}],ref:"form2",staticClass:"animate__animated animate__fadeIn animate__fast",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.register.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[o("v-text-field",{attrs:{counter:20,rules:t.accountRules,label:"帳號",required:""},model:{value:t.form2.account,callback:function(e){t.$set(t.form2,"account",e)},expression:"form2.account"}}),o("v-text-field",{attrs:{rules:t.passwordRules,label:"密碼",required:"","append-icon":t.show?"mdi-eye":"mdi-eye-off",type:t.show?"text":"password",counter:""},on:{"click:append":function(e){t.show=!t.show}},model:{value:t.form2.password,callback:function(e){t.$set(t.form2,"password",e)},expression:"form2.password"}}),o("v-btn",{staticClass:"ma-4",attrs:{disabled:!t.valid,outlined:"",rounded:"",color:"orange",type:"submit"},on:{click:t.accountvalidate2}},[t._v(" 註冊 ")]),o("br"),o("v-btn",{attrs:{text:"",color:"error"},on:{click:function(e){t.logining=!0}}},[t._v(" 已有帳號? 立即登入 ")])],1)],1)],1),o("v-spacer"),o("VueToggles",{staticClass:"right ml-md-8 ml-sm-2 pr-12",attrs:{value:t.isToggled,width:"50","checked-text":" 🌛 ","unchecked-text":" 🌞 ",checkedBg:"blue",uncheckedBg:"white"},on:{click:t.turnOn}})],1),o("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[o("v-list",{attrs:{nav:"",dense:""}},[o("v-list-item-group",{attrs:{"active-class":"pink--text text--accent-4"},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[o("v-list-item",{attrs:{to:"/",exact:""}},[o("v-list-item-icon",[o("v-icon",[t._v("mdi-home")])],1),o("v-list-item-title",[t._v("商品")])],1),o("v-list-item",{attrs:{to:"/grouppage",disabled:"",exact:""}},[o("v-list-item-icon",[o("v-icon",[t._v("mdi-account-multiple")])],1),o("v-list-item-title",[t._v("團體募集")])],1),o("v-list-item",{directives:[{name:"show",rawName:"v-show",value:!t.user.isLogin,expression:"!user.isLogin"}],attrs:{inactive:""},on:{click:t.open}},[o("v-list-item-icon",[o("v-icon",[t._v("mdi-account")])],1),o("v-list-item-title",[t._v("會員登入")])],1),o("v-list-item",{directives:[{name:"show",rawName:"v-show",value:t.user.isLogin,expression:"user.isLogin"}],attrs:{to:"/memberpage",exact:""}},[o("v-list-item-icon",[o("v-icon",[t._v("mdi-account")])],1),o("v-list-item-title",[t._v("會員專區")])],1),o("v-list-item",{directives:[{name:"show",rawName:"v-show",value:t.user.isLogin,expression:"user.isLogin"}],staticClass:"red--text",on:{click:t.logout}},[o("v-list-item-icon",[o("v-icon",{attrs:{color:"red"}},[t._v("mdi-logout")])],1),o("v-list-item-title",[t._v("會員登出")])],1)],1)],1),o("div",{staticClass:"px-4"},[o("v-img",{staticClass:"mt-16 mb-6",attrs:{src:s(4200),alt:"logo",contain:""}}),o("p",[t._v("「Swapper 絲滑易物」為一手、二手物品的交流平台")]),o("p",{staticClass:"mt-16 font-italic font-weight-thin"},[t._v(" 「你眼中的垃圾，可能是別人眼中的寶貝」 ")]),o("p",{staticClass:"text-center mt-4"},[t._v(" 聯絡管理員: "),o("a",{attrs:{href:"mailto:majaja@gmail.com"}},[t._v("majaja@gmail.com")])])],1)],1),[o("div",{staticClass:"text-center"},[o("v-snackbar",{staticClass:"mt-16",attrs:{top:"",color:t.sColor,"multi-line":"",timeout:"1500",transition:"scale-transition"},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.attrs;return[o("v-btn",t._b({attrs:{color:"blue lighten-5",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",s,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[o("h3",{staticClass:"ml-4"},[t._v(t._s(t.sText))])]),o("v-snackbar",{staticClass:"mt-16",attrs:{top:"",color:"red","multi-line":"",timeout:"1500",transition:"scale-transition"},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.attrs;return[o("v-btn",t._b({attrs:{color:"blue lighten-5",text:""},on:{click:function(e){t.snackbar3=!1}}},"v-btn",s,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar3,callback:function(e){t.snackbar3=e},expression:"snackbar3"}},[o("h3",{staticClass:"ml-4"},[t._v("已登出")])])],1)],[o("div",{staticClass:"text-center"},[o("v-snackbar",{staticClass:"mt-16",attrs:{top:"",color:t.reColor,"multi-line":"",timeout:"1500",transition:"scale-transition"},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.attrs;return[o("v-btn",t._b({attrs:{color:"blue lighten-5",text:""},on:{click:function(e){t.snackbar2=!1}}},"v-btn",s,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar2,callback:function(e){t.snackbar2=e},expression:"snackbar2"}},[o("h3",{staticClass:"ml-4"},[t._v(t._s(t.reText))])])],1)],o("v-main",{staticClass:"mt-sm-8"},[o("router-view")],1)],2),o("v-footer",{staticClass:"bottom black--text",attrs:{padless:"",color:"white",width:"100%"}},[o("v-col",{staticClass:"text-center footer",attrs:{cols:"12"}},[t._v(" Copyright © "+t._s((new Date).getFullYear())+" "),o("strong",[t._v("Swapper")]),t._v(". All rights reserved. 版權所有© "+t._s((new Date).getFullYear())+" "),o("strong",[t._v("Swapper")])])],1)],1)},n=[],r={name:"App",data:()=>({drawer:!1,group:null,Appheight:110,valid:!0,form:{account:"",password:""},form2:{account:"",password:""},accountRules:[t=>!!t||"請輸入帳號",t=>t&&t.length<=10||"帳號需介於4~20個字元之間",t=>t&&t.length>=4||"帳號需介於4~20個字元之間"],passwordRules:[t=>!!t||"請輸入密碼"],isToggled:!1,logining:!0,lists:[{name:"商品刊登",url:"/memberpage/memberpost"},{name:"上架商品編輯",url:"/memberpage/postedit"},{name:"訊息",url:"/memberpage/membermessage"},{name:"會員登出"}],show:!1,snackbar:!1,snackbar2:!1,snackbar3:!1,reText:"",reColor:"",dialog:!1,state:""}),methods:{open(){this.dialog=!0,this.drawer=!1},accountvalidate(){this.$refs.form.validate()},accountvalidate2(){this.$refs.form2.validate()},turnOn(){this.isToggled=!this.isToggled,!0===this.isToggled?this.$vuetify.theme.dark=!0:this.$vuetify.theme.dark=!1},async register(){const t=this.$refs.form2.validate();if(t)try{await this.api.post("/users",this.form2),this.reText="註冊成功",this.reColor="success",this.snackbar2=!0,this.logining=!0}catch(e){this.reText="帳號重複",this.reColor="red",this.snackbar2=!0}},login(){this.$store.dispatch("login",this.form),this.snackbar=!0},logout(){this.$store.dispatch("logout"),this.snackbar3=!0},myEventHandler(){window.innerWidth<=450?this.Appheight=50:this.Appheight=110}},computed:{user(){return this.$store.getters.user},sColor(){return this.$store.state.sColor},sText(){return this.$store.state.sText}},async created(){this.$store.dispatch("getInfo"),window.addEventListener("resize",this.myEventHandler),window.innerWidth<=450?this.Appheight=50:this.Appheight=110},destroyed(){window.removeEventListener("resize",this.myEventHandler)}},i=r,c=s(1001),l=s(3453),u=s.n(l),d=s(303),m=s(1466),p=s(5078),h=s(6847),v=s(2026),f=s(7024),g=s(5634),b=s(5596),w=s(7718),k=s(3240),x=s(4456),_=s(5288),C=s(893),y=s(907),Z=s(3080),V=s(3560),I=s(8218),T=s(4021),S=s(5842),L=s(1373),N=s(4654),E=s(2515),A=s(756),j=s(3780),O=s(7731),M=s(4980),P=(0,c.Z)(i,a,n,!1,null,"58f6d2b6",null),$=P.exports;u()(P,{VApp:d.Z,VAppBar:m.Z,VAppBarNavIcon:p.Z,VBtn:h.Z,VCard:v.Z,VCol:f.Z,VDialog:g.Z,VDivider:b.Z,VFooter:w.Z,VForm:k.Z,VIcon:x.Z,VImg:_.Z,VList:C.Z,VListItem:y.Z,VListItemGroup:Z.Z,VListItemIcon:V.Z,VListItemTitle:I.V9,VMain:T.Z,VMenu:S.Z,VNavigationDrawer:L.Z,VSnackbar:N.Z,VSpacer:E.Z,VTab:A.Z,VTabs:j.Z,VTabsSlider:O.Z,VTextField:M.Z});var Q=s(5205);(0,Q.z)("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var B=s(9706),F=s(615),D=s(5121);o.Z.use(D.Z);var z=new D.Z({}),R=s(4268),W=(s(4408),s(6106));o.Z.component("VueToggles",R.Z),o.Z.component("ImgInputer",W.Z),o.Z.config.productionTip=!1,new o.Z({router:B.Z,store:F.Z,vuetify:z,render:t=>t($)}).$mount("#app")},4408:function(t,e,s){s.d(e,{h:function(){return l}});var o=s(144),a=s(9669),n=s.n(a),r=s(2346),i=s(615),c=s(9706);const l=n().create({baseURL:"https://sodfnfnccccc.herokuapp.com/"});l.interceptors.response.use((t=>t),(t=>{if(t.response){if(401===t.response.status&&"/users/extend"!==t.config.url){const e=t.config;return l.post("/users/extend",{},{headers:{authorization:"Bearer "+i.Z.state.token}}).then((({data:t})=>(i.Z.commit("extend",t.result.token),e.headers.authorization="Bearer "+i.Z.state.token,n()(e)))).catch((t=>(i.Z.commit("logout"),c.Z.push("/"),Promise.reject(t))))}}else"ECONNABORTED"===t.code&&t.message.includes("timeout")?alert("連線逾時"):alert("網路不穩定");return Promise.reject(t)})),o.Z.use(r.Z,{axios:n(),api:l})},9706:function(t,e,s){s.d(e,{Z:function(){return A}});var o=s(144),a=s(4903),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("v-row",{staticClass:"mt-sm-12 mx-sm-8 pt-sm-8 pt-md-0",attrs:{justify:"center"}},[s("v-col",{staticClass:"d-md-none pb-0 pb-sm-3",attrs:{cols:"12"}},[s("v-row",{attrs:{justify:"space-around"}},[s("v-col",{staticClass:"pb-0 pb-sm-3",attrs:{cols:"12"}},[s("v-sheet",{staticClass:"pt-4 pb-sm-4 px-1"},[s("v-chip-group",{attrs:{mandatory:"","active-class":"red--text red"}},t._l(t.items,(function(e){return s("v-chip",{key:e,staticClass:"mx-auto",attrs:{outlined:""},on:{click:function(s){return t.type(e)}}},[t._v(" "+t._s(e)+" ")])})),1)],1)],1)],1)],1),s("v-col",{attrs:{cols:"8",sm:"3"}},[s("v-text-field",{staticClass:"mb-md-2 mb-sm-8",attrs:{label:"搜尋商品名稱",color:"pink"},model:{value:t.searchtext,callback:function(e){t.searchtext=e},expression:"searchtext"}})],1),s("v-col",{staticClass:"pa-0 colHeight",attrs:{cols:"12"}},[s("v-row",[s("v-col",{staticClass:"d-none d-md-block",attrs:{cols:2}},[[s("v-card",{staticClass:"ml-lg-16",attrs:{"max-width":"120"}},[s("v-list",{staticClass:"text-center pa-0",attrs:{nav:"",flat:""}},[s("v-list-item-group",{attrs:{mandatory:""}},t._l(t.items,(function(e,o){return s("div",{key:e[o]},[s("v-list-item",{staticClass:"mb-0",attrs:{color:"pink","active-class":"select"},on:{click:function(s){return t.type(e)}}},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(e)}})],1)],1),"衣鞋包錶"!=e?s("v-divider"):t._e()],1)})),0)],1)],1)]],2),s("v-col",[s("v-row",[s("v-col",{staticClass:"overflow-auto",attrs:{cols:12}},[s("v-row",{staticClass:"px-lg-16"},t._l(t.search,(function(e){return s("v-col",{key:e.name,staticClass:"d-flex d-sm-block justify-center",attrs:{sm:"4",lg:3}},[[s("v-card",{staticClass:"overflow-hidden",attrs:{"max-width":"250",height:"280",hover:""},on:{click:function(s){return t.into(e)}}},[s("template",{slot:"progress"},[s("v-progress-linear",{attrs:{color:"deep-purple",height:"10",indeterminate:""}})],1),s("v-img",{attrs:{height:"185",src:e.image}}),s("v-card-title",{staticClass:"py-1 font-weight-bold"},[t._v(t._s(e.name))]),s("v-card-text",[t._v(t._s(e.introTitle))])],2)]],2)})),1)],1)],1)],1)],1)],1),s("v-col",{staticClass:"mt-sm-4",attrs:{cols:"12"}},[s("div",{staticClass:"mt-md-6 mt-sm-12 mb-sm-8 mb-md-0 d-none d-sm-block"},[s("v-pagination",{attrs:{length:t.productQ,color:"pink"},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)])],1)],1)},r=[],i={name:"HomeView",data:()=>({items:["全部","電腦","通訊","數位","家電","日用","生活","運動戶外","美妝","衣鞋包錶"],searchtext:"",productQ:1,productP:[],page:1,products:[]}),methods:{async type(t){if("全部"===t){try{const{data:t}=await this.api.get("/showProducts");this.products=t.result}catch(e){alert("網路錯誤")}window.innerWidth<=960?this.products.length>6?this.productQ=Math.floor(this.search.length/6)+1:this.productQ=1:this.products.length>8?this.productQ=Math.floor(this.search.length/8)+1:this.productQ=1}else{try{const{data:e}=await this.api.get("/showProducts/"+t);this.products=e.result}catch(e){alert("網路錯誤")}window.innerWidth<=960?this.products.length>6?this.productQ=Math.floor(this.search.length/6)+1:this.productQ=1:this.products.length>8?this.productQ=Math.floor(this.search.length/8)+1:this.productQ=1}},into(t){this.$store.commit("into",t)}},async created(){try{const{data:t}=await this.api.get("/showProducts");this.products=t.result}catch(t){alert("網路錯誤")}window.innerWidth<=960?this.products.length>6?this.productQ=Math.floor(this.search.length/6)+1:this.productQ=1:this.products.length>8?this.productQ=Math.floor(this.search.length/8)+1:this.productQ=1},computed:{search(){let t=this.products.filter((t=>{if(t.name.toLowerCase().includes(this.searchtext.toLowerCase()))return!0}));return t.filter(((e,s)=>{if(window.innerWidth<=450)return!0;if(window.innerWidth<=960){if(t.length<6)return!0;if(t.length>=6&&s>=6*(this.page-1)&&s<6*(this.page-1)+6)return!0}else{if(t.length<8)return!0;if(t.length>=8&&s>=8*(this.page-1)&&s<8*(this.page-1)+8)return!0}}))}},watch:{search:function(t,e){(""!==this.searchtext||t>e&&""===this.searchtext)&&(window.innerWidth<=960?this.products.length>6?this.productQ=Math.floor(this.search.length/6)+1:this.productQ=1:this.products.length>8?this.productQ=Math.floor(this.search.length/8)+1:this.productQ=1)},searchtext:function(){this.page=1}}},c=i,l=s(1001),u=s(3453),d=s.n(u),m=s(2026),p=s(5255),h=s(5126),v=s(549),f=s(7024),g=s(5596),b=s(5288),w=s(893),k=s(907),x=s(8218),_=s(3080),C=s(2791),y=s(510),Z=s(7894),V=s(801),I=s(4980),T=(0,l.Z)(c,n,r,!1,null,null,null),S=T.exports;d()(T,{VCard:m.Z,VCardText:p.ZB,VCardTitle:p.EB,VChip:h.Z,VChipGroup:v.Z,VCol:f.Z,VDivider:g.Z,VImg:b.Z,VList:w.Z,VListItem:k.Z,VListItemContent:x.km,VListItemGroup:_.Z,VListItemTitle:x.V9,VPagination:C.Z,VProgressLinear:y.Z,VRow:Z.Z,VSheet:V.Z,VTextField:I.Z});var L=s(615);o.Z.use(a.Z);const N=[{path:"/",name:"home",component:S,meta:{title:"Swapper"}},{path:"/about",name:"about",component:()=>s.e(443).then(s.bind(s,3157)),meta:{title:"關於我們 | Swapper"}},{path:"/grouppage",name:"grouppage",component:()=>s.e(318).then(s.bind(s,8124)),meta:{title:"團體募集 | Swapper"}},{path:"/memberpage",component:()=>s.e(490).then(s.bind(s,8851)),children:[{path:"",name:"memberpage",component:()=>s.e(490).then(s.bind(s,9162)),meta:{title:"會員專區 | Swapper",login:!0}},{path:"memberpost",name:"memberpost",component:()=>s.e(490).then(s.bind(s,7670)),meta:{title:"商品刊登 | Swapper",login:!0}},{path:"postedit",name:"postedit",component:()=>s.e(490).then(s.bind(s,8949)),meta:{title:"商品管理 | Swapper",login:!0}},{path:"membermessage",name:"membermessage",component:()=>s.e(490).then(s.bind(s,3660)),meta:{title:"訊息 | Swapper",login:!0}}]},{path:"/productpage",name:"productpage",component:()=>s.e(233).then(s.bind(s,5202)),meta:{title:"商品頁 | Swapper"}}],E=new a.Z({routes:N});E.beforeEach(((t,e,s)=>{const o=L.Z.getters.user;t.meta.login&&!o.isLogin?s("/"):s()})),E.afterEach((t=>{document.title=t.meta.title}));var A=E},615:function(t,e,s){var o=s(144),a=s(629),n=s(4408),r=s(4702),i=s(9706);o.Z.use(a.ZP),e["Z"]=new a.ZP.Store({state:{userId:"",token:"",account:"",role:0,userInfo:{userName:"",aboutMe:"",image:""},userImg:"",sColor:"",sText:"",uploadText:"上傳成功，請稍後．．．",product:{},chatid:""},getters:{user(t){return{isLogin:t.token.length>0,isAdmin:1===t.role,...t}}},mutations:{login(t,e){t.userId=e._id,t.token=e.token,t.account=e.account,t.role=e.role,t.userInfo.userName=e.userName,t.userInfo.aboutMe=e.aboutMe,t.userImg=e.image},logout(t){t.userId="",t.token="",t.account="",t.role=0,t.userInfo.userName="",t.userInfo.aboutMe="",t.userImg="",i.Z.push("/")},getInfo(t,e){t.userId=e._id,t.account=e.account,t.role=e.role,t.userInfo.userName=e.userName,t.userInfo.aboutMe=e.aboutMe,t.userImg=e.image},extend(t,e){t.token=e},uploadimg(t,e){t.userInfo.image=e.image},into(t,e){t.product=e,i.Z.push("/productpage")}},actions:{async login({commit:t,state:e},s){try{const{data:o}=await n.h.post("/users/login",s);t("login",o.result),e.sColor="success",e.sText="登入成功"}catch(o){e.sColor="red",e.sText="帳號或密碼錯誤"}},async updateInfo({state:t},e){this.commit("uploadimg",e);const s=new FormData;for(const a in t.userInfo)"_id"!==a&&s.append(a,t.userInfo[a]);try{const{data:e}=await n.h.patch("/users/"+t.userId,s,{headers:{authorization:"Bearer "+t.token}});t.userInfo[t.userInfo.index]={...t.userInfo,image:e.result.image},location.reload()}catch(o){console.log(o)}},async logout({commit:t,state:e}){try{await n.h["delete"]("/users/logout",{headers:{authorization:"Bearer "+e.token}}),t("logout")}catch(s){}},async getInfo({commit:t,state:e}){if(0!==e.token.length)try{const{data:s}=await n.h.get("/users/me",{headers:{authorization:"Bearer "+e.token}});t("getInfo",s.result)}catch(s){t("logout")}}},modules:{},plugins:[(0,r.Z)({key:"user",paths:["token"]})]})},8373:function(t,e,s){t.exports=s.p+"img/bar.a8381ded.svg"},9574:function(t,e,s){t.exports=s.p+"img/logo.f92da142.svg"},4200:function(t,e,s){t.exports=s.p+"img/oldlogo.09d428c1.svg"}},e={};function s(o){var a=e[o];if(void 0!==a)return a.exports;var n=e[o]={id:o,loaded:!1,exports:{}};return t[o](n,n.exports,s),n.loaded=!0,n.exports}s.m=t,function(){s.amdO={}}(),function(){var t=[];s.O=function(e,o,a,n){if(!o){var r=1/0;for(u=0;u<t.length;u++){o=t[u][0],a=t[u][1],n=t[u][2];for(var i=!0,c=0;c<o.length;c++)(!1&n||r>=n)&&Object.keys(s.O).every((function(t){return s.O[t](o[c])}))?o.splice(c--,1):(i=!1,n<r&&(r=n));if(i){t.splice(u--,1);var l=a();void 0!==l&&(e=l)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[o,a,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,o){return s.f[o](t,e),e}),[]))}}(),function(){s.u=function(t){return"js/"+{233:"productpage",318:"grouppage",443:"about",490:"memberpage"}[t]+"."+{233:"f1a45d36",318:"5e4a0519",443:"ff0eb86e",490:"01786ef5"}[t]+".js"}}(),function(){s.miniCssF=function(t){return"css/"+{233:"productpage",490:"memberpage"}[t]+"."+{233:"475fced5",490:"34c78c0e"}[t]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="final_front:";s.l=function(o,a,n,r){if(t[o])t[o].push(a);else{var i,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==e+n){i=d;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.setAttribute("data-webpack",e+n),i.src=o),t[o]=[a];var m=function(e,s){i.onerror=i.onload=null,clearTimeout(p);var a=t[o];if(delete t[o],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(t){return t(s)})),e)return e(s)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p=""}(),function(){var t=function(t,e,s,o){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var n=function(n){if(a.onerror=a.onload=null,"load"===n.type)s();else{var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=r,c.request=i,a.parentNode.removeChild(a),o(c)}};return a.onerror=a.onload=n,a.href=e,document.head.appendChild(a),a},e=function(t,e){for(var s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var a=s[o],n=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(n===t||n===e))return a}var r=document.getElementsByTagName("style");for(o=0;o<r.length;o++){a=r[o],n=a.getAttribute("data-href");if(n===t||n===e)return a}},o=function(o){return new Promise((function(a,n){var r=s.miniCssF(o),i=s.p+r;if(e(r,i))return a();t(o,i,a,n)}))},a={143:0};s.f.miniCss=function(t,e){var s={233:1,490:1};a[t]?e.push(a[t]):0!==a[t]&&s[t]&&e.push(a[t]=o(t).then((function(){a[t]=0}),(function(e){throw delete a[t],e})))}}(),function(){var t={143:0};s.f.j=function(e,o){var a=s.o(t,e)?t[e]:void 0;if(0!==a)if(a)o.push(a[2]);else{var n=new Promise((function(s,o){a=t[e]=[s,o]}));o.push(a[2]=n);var r=s.p+s.u(e),i=new Error,c=function(o){if(s.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var n=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;i.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",i.name="ChunkLoadError",i.type=n,i.request=r,a[1](i)}};s.l(r,c,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,n,r=o[0],i=o[1],c=o[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(c)var u=c(s)}for(e&&e(o);l<r.length;l++)n=r[l],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(u)},o=self["webpackChunkfinal_front"]=self["webpackChunkfinal_front"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(5221)}));o=s.O(o)})();
//# sourceMappingURL=app.57ce3729.js.map